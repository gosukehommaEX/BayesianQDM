% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/pMCMCdiff.R
\name{pMCMCdiff}
\alias{pMCMCdiff}
\title{Posterior Probability Calculation using MCMC Sampling for Continuous Endpoints}
\usage{
pMCMCdiff(
  nMCMCsample,
  q,
  mu.n1,
  mu.n2,
  sd.n1,
  sd.n2,
  n1,
  n2,
  ne1,
  ne2,
  alpha01,
  alpha02
)
}
\arguments{
\item{nMCMCsample}{A positive integer representing the number of Markov Chain Monte Carlo iterations.}

\item{q}{A numeric value representing the quantile threshold.}

\item{mu.n1}{A numeric vector representing the mean values of the treatment group in current trial.}

\item{mu.n2}{A numeric vector representing the mean values of the control group in current trial.}

\item{sd.n1}{A positive numeric vector representing the standard deviations of the treatment group in current trial.}

\item{sd.n2}{A positive numeric vector representing the standard deviations of the control group in current trial.}

\item{n1}{A positive integer representing the sample size of the treatment group in current trial.}

\item{n2}{A positive integer representing the sample size of the control group in current trial.}

\item{ne1}{A positive integer representing the sample size of the treatment group in external trial (can be NULL if no external treatment data).}

\item{ne2}{A positive integer representing the sample size of the control group in external trial (can be NULL if no external control data).}

\item{alpha01}{A positive numeric value between 0 and 1 representing the power prior scaling parameter for external treatment data (can be NULL if no external treatment data).}

\item{alpha02}{A positive numeric value between 0 and 1 representing the power prior scaling parameter for external control data (can be NULL if no external control data).}
}
\value{
A numeric vector representing P(μt - μc > q), the posterior probability
that the treatment effect (difference between treatment and control group means)
exceeds the quantile q, based on MCMC sampling of the posterior distribution.
The length of the output matches the maximum length of the input vectors.
}
\description{
This function calculates the Bayesian posterior probability P(μt - μc > q)
for continuous endpoints using MCMC sampling to obtain the posterior distribution
of the treatment effect. The function optionally supports incorporation of external
(historical) data through power prior methodology.
}
\details{
This function performs Bayesian posterior inference using MCMC sampling to compute
the probability that the treatment effect exceeds a specified threshold. The core
methodology involves:
\itemize{
\item MCMC sampling to obtain the posterior distribution of μt and μc
\item Computing the posterior distribution of the treatment effect (μt - μc)
\item Calculating the probability that this difference exceeds the threshold q
}

The function supports standard two-group Bayesian analysis when no external data
is provided (ne1=NULL, ne2=NULL, alpha01=NULL, alpha02=NULL). In this case, the
analysis is based solely on the current trial data using non-informative priors.

When external data is available, the function can incorporate historical information
using power prior methodology:
\itemize{
\item alpha = 1: Full borrowing (external data weighted equally to current data)
\item alpha = 0: No borrowing (external data ignored)
\item 0 < alpha < 1: Partial borrowing (external data down-weighted)
}

The resulting posterior distribution is typically non-conjugate and requires
MCMC sampling for computation. The function uses the bayesDP package's
bdpnormal function for robust MCMC-based Bayesian estimation.

All main distribution parameters (mu.n1, mu.n2, sd.n1, sd.n2) support vectorized inputs.
When vectors of different lengths are provided, they are recycled to match the longest vector.
The function returns a vector of the same length containing the corresponding probabilities.
}
\examples{
\dontrun{
# Standard Bayesian analysis without external data - single values
pMCMCdiff(nMCMCsample = 1e+4, q = 4, mu.n1 = 5, mu.n2 = 0, sd.n1 = 1, sd.n2 = 1,
          n1 = 12, n2 = 12, ne1 = NULL, ne2 = NULL, alpha01 = NULL, alpha02 = NULL)

# Vectorized analysis with multiple parameter sets
pMCMCdiff(nMCMCsample = 1e+4, q = 4,
          mu.n1 = c(5, 6, 7), mu.n2 = c(0, 1, 2),
          sd.n1 = c(1, 1.2, 1.5), sd.n2 = c(1, 1.1, 1.3),
          n1 = 12, n2 = 12, ne1 = NULL, ne2 = NULL,
          alpha01 = NULL, alpha02 = NULL)

# With external control data using power prior - vectorized
pMCMCdiff(nMCMCsample = 1e+4, q = 4,
          mu.n1 = c(5, 6), mu.n2 = c(0, 1),
          sd.n1 = c(1, 1.2), sd.n2 = c(1, 1.1),
          n1 = 12, n2 = 12, ne1 = NULL, ne2 = 24,
          alpha01 = NULL, alpha02 = 0.5)
}

}
